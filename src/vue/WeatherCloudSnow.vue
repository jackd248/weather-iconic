<template>
  <svg
    :width="size"
    :height="size"
    viewBox="0 0 32 32"
    :fill="multiColor ? 'none' : color"
    :class="combinedClassName"
    :style="combinedStyle"
    :role="title ? 'img' : 'presentation'"
    :aria-hidden="title ? 'false' : 'true'"
    :aria-label="title"
    v-bind="$attrs"
  >
    <title v-if="title">{{ title }}</title>
    <path 
        d="M15.136,22.048C15.136,22.543 14.735,22.944 14.24,22.944C13.745,22.944 13.344,22.543 13.344,22.048C13.344,21.553 13.745,21.152 14.24,21.152C14.735,21.152 15.136,21.553 15.136,22.048ZM17.504,22.048C17.504,22.543 17.103,22.944 16.608,22.944C16.113,22.944 15.712,22.543 15.712,22.048C15.712,21.553 16.113,21.152 16.608,21.152C17.103,21.152 17.504,21.553 17.504,22.048ZM16.32,24.416C16.32,24.911 15.919,25.312 15.424,25.312C14.929,25.312 14.528,24.911 14.528,24.416C14.528,23.921 14.929,23.52 15.424,23.52C15.919,23.52 16.32,23.921 16.32,24.416ZM16.32,19.296C16.32,19.791 15.919,20.192 15.424,20.192C14.929,20.192 14.528,19.791 14.528,19.296C14.528,18.801 14.929,18.4 15.424,18.4C15.919,18.4 16.32,18.801 16.32,19.296ZM18.72,24.416C18.72,24.911 18.319,25.312 17.824,25.312C17.329,25.312 16.928,24.911 16.928,24.416C16.928,23.921 17.329,23.52 17.824,23.52C18.319,23.52 18.72,23.921 18.72,24.416ZM18.72,19.296C18.72,19.791 18.319,20.192 17.824,20.192C17.329,20.192 16.928,19.791 16.928,19.296C16.928,18.801 17.329,18.4 17.824,18.4C18.319,18.4 18.72,18.801 18.72,19.296ZM19.84,22.048C19.84,22.543 19.439,22.944 18.944,22.944C18.449,22.944 18.048,22.543 18.048,22.048C18.048,21.553 18.449,21.152 18.944,21.152C19.439,21.152 19.84,21.553 19.84,22.048Z"
        :fill="multiColor ? (primaryColor || 'currentColor') : color"
      />
    <path 
        d="M23.744,15.648L23.744,15.264C23.744,11.968 21.056,9.312 17.792,9.312C15.808,9.312 13.984,10.272 12.864,11.936C12.608,11.872 12.32,11.84 12.032,11.84C9.024,11.84 6.592,14.272 6.592,17.28L6.592,17.376C6.592,20.384 9.024,22.816 12.032,22.816C12.512,22.816 12.928,22.4 12.928,21.92C12.928,21.44 12.544,21.024 12.032,21.024C10.048,21.024 8.448,19.456 8.384,17.472C8.384,17.408 8.416,17.376 8.416,17.312C8.416,16.704 8.576,16.128 8.832,15.616C9.44,14.496 10.656,13.728 12.032,13.728C12.288,13.728 12.608,13.76 12.864,13.824C13.312,13.984 13.76,14.24 14.08,14.464C14.496,14.72 15.04,14.624 15.328,14.208C15.584,13.792 15.488,13.248 15.072,12.96C14.912,12.864 14.752,12.736 14.56,12.64C15.328,11.68 16.512,11.072 17.792,11.072C20.064,11.072 21.92,12.928 21.92,15.2C21.92,15.424 21.888,15.648 21.856,15.904C21.792,16.288 21.984,16.704 22.368,16.864C23.136,17.216 23.616,17.984 23.616,18.816C23.616,20 22.656,20.96 21.472,20.96C20.992,20.96 20.576,21.376 20.576,21.856C20.576,22.336 20.96,22.752 21.472,22.752C23.648,22.752 25.44,20.992 25.472,18.912C25.472,17.6 24.8,16.384 23.744,15.648Z"
        :fill="multiColor ? (secondaryColor || '#666666') : color"
      />
  </svg>
</template>

<script setup lang="ts">
import { computed } from 'vue'

interface Props {
  size?: number | string
  color?: string
  multiColor?: boolean
  primaryColor?: string
  secondaryColor?: string
  className?: string
  style?: Record<string, any>
  title?: string
}

const props = withDefaults(defineProps<Props>(), {
  size: 24,
  color: 'currentColor',
  multiColor: false
})

const combinedClassName = computed(() => {
  const classes = [props.className]
  if (props.multiColor) {
    classes.push('weather-multi-color', 'weather-cloud-snow')
  }
  return classes.filter(Boolean).join(' ')
})

const combinedStyle = computed(() => {
  if (!props.multiColor) return props.style
  
  return {
    ...props.style,
    ...(props.primaryColor && { '--weather-primary-fill': props.primaryColor }),
    ...(props.secondaryColor && { '--weather-secondary-fill': props.secondaryColor })
  }
})
</script>
